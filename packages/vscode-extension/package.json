{
  "name": "cairn-extension",
  "displayName": "Cairn: Context Keeper",
  "version": "1.0.1",
  "publisher": "valpet",
  "description": "Prevents AI agent 'dementia' in long development sessions. Maintains persistent, structured context through a dependency-aware graph that survives across conversations.",
  "readme": "README.md",
  "author": {
    "name": "Peter Valtersson",
    "email": "peter.valtersson@gmail.com"
  },
  "license": "MIT",
  "repository": "https://github.com/valpet/cairn",
  "homepage": "https://github.com/valpet/cairn",
  "bugs": {
    "url": "https://github.com/valpet/cairn/issues"
  },
  "keywords": [
    "task",
    "management",
    "ai",
    "collaboration",
    "productivity",
    "workflow",
    "project",
    "organization"
  ],
  "categories": [
    "AI",
    "Other"
  ],
  "galleryBanner": {
    "color": "#1e1e1e",
    "theme": "dark"
  },
  "preview": true,
  "icon": "media/cairn-icon.png",
  "main": "dist/src/extension.js",
  "scripts": {
    "build": "esbuild src/extension.ts --bundle --outfile=dist/src/extension.js --external:vscode --format=cjs --platform=node --sourcemap",
    "dev-setup": "cd ../core && npm link && cd ../vscode-extension && npm link @valpet/cairn-core",
    "prepackage": "if not exist node_modules\\@cairn mkdir node_modules\\@cairn && xcopy ..\\core\\dist node_modules\\@cairn\\core /E /I /Y && copy ..\\core\\package.json node_modules\\@cairn\\core\\",
    "package": "npx vsce package",
    "package-all": "npm run build && npm run prepackage && npm run package",
    "install": "npm run package-all && code-insiders --install-extension cairn-extension-1.0.1.vsix",
    "test": "vitest --run --passWithNoTests"
  },
  "dependencies": {
    "@valpet/cairn-core": "file:../core",
    "nanoid": "^5.0.0"
  },
  "engines": {
    "vscode": "^1.90.0"
  },
  "enabledApiProposals": [
    "languageModelTools"
  ],
  "activationEvents": [
    "onCommand:cairn.openTaskList",
    "onCommand:cairn.editTicket",
    "onCommand:cairn.createTicket",
    "onLanguageModelTool:cairn_create",
    "onLanguageModelTool:cairn_list_ready",
    "onLanguageModelTool:cairn_update",
    "onLanguageModelTool:cairn_dep_add",
    "onLanguageModelTool:cairn_comment"
  ],
  "contributes": {
    "commands": [
      {
        "command": "cairn.openTaskList",
        "title": "Cairn: Open Task List"
      },
      {
        "command": "cairn.editTicket",
        "title": "Cairn: Edit Issue"
      },
      {
        "command": "cairn.createTicket",
        "title": "Cairn: Create New Issue"
      }
    ],
    "languageModelTools": [
      {
        "name": "cairn_create",
        "displayName": "Create Task",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_create",
        "userDescription": "Create a new task in Cairn task management system",
        "modelDescription": "Create a new task in Cairn with full configuration options. Use this when the user wants to create a new task, issue, or work item with specific properties like title, description, type (task/bug/feature/epic/chore/docs/refactor), priority (low/medium/high/urgent), status, or parent relationships.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string",
              "description": "The title of the task"
            },
            "description": {
              "type": "string",
              "description": "Optional description of the task"
            },
            "type": {
              "type": "string",
              "enum": [
                "task",
                "bug",
                "feature",
                "epic",
                "chore",
                "docs",
                "refactor"
              ],
              "description": "Type of the task"
            },
            "priority": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "Priority level"
            },
            "status": {
              "type": "string",
              "enum": [
                "open",
                "in_progress",
                "closed",
                "blocked"
              ],
              "description": "Initial status of the task"
            },
            "parent": {
              "type": "string",
              "description": "Optional parent task ID for parent-child relationship"
            }
          },
          "required": [
            "title"
          ]
        }
      },
      {
        "name": "cairn_list_ready",
        "displayName": "List Ready Tasks",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_list_ready",
        "userDescription": "List all unblocked tasks that are ready to work on",
        "modelDescription": "List all ready (unblocked) tasks in Cairn. Use this to find work that can be started immediately, without any blocking dependencies. Returns tasks with their ID, title, status, and priority.",
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      },
      {
        "name": "cairn_update",
        "displayName": "Update Task",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_update",
        "userDescription": "Update an existing task's status, notes, or acceptance criteria",
        "modelDescription": "Update an existing task in Cairn. Use this to change task status (open/in_progress/closed/blocked), add notes, or update acceptance criteria. Always provide the task ID.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the task to update"
            },
            "status": {
              "type": "string",
              "enum": [
                "open",
                "in_progress",
                "closed",
                "blocked"
              ],
              "description": "New status for the task"
            },
            "notes": {
              "type": "string",
              "description": "Optional notes to add"
            },
            "acceptance_criteria": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Acceptance criteria as array of strings"
            }
          },
          "required": [
            "id"
          ]
        }
      },
      {
        "name": "cairn_dep_add",
        "displayName": "Add Dependency",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_dep_add",
        "userDescription": "Add a dependency relationship between two tasks",
        "modelDescription": "Add a dependency between tasks in Cairn. Use this to create relationships: 'blocks' (task A blocks task B), 'related' (general relationship), 'parent-child' (epic/subtask), or 'discovered-from' (task discovered while working on another).",
        "inputSchema": {
          "type": "object",
          "properties": {
            "from": {
              "type": "string",
              "description": "The ID of the dependent task"
            },
            "to": {
              "type": "string",
              "description": "The ID of the task it depends on"
            },
            "type": {
              "type": "string",
              "enum": [
                "blocks",
                "related",
                "parent-child",
                "discovered-from"
              ],
              "description": "Type of dependency"
            }
          },
          "required": [
            "from",
            "to",
            "type"
          ]
        }
      },
      {
        "name": "cairn_comment",
        "displayName": "Add Comment",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_comment",
        "userDescription": "Add a comment to a task for collaboration",
        "modelDescription": "Add a comment to a Cairn task for collaboration and documentation. Use this to record findings, ideas, challenges, solutions, progress updates, or communicate with the developer. Comments preserve project history and context.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "issue_id": {
              "type": "string",
              "description": "The ID of the task to add a comment to"
            },
            "author": {
              "type": "string",
              "description": "Author of the comment (e.g., 'agent' or developer name)"
            },
            "content": {
              "type": "string",
              "description": "The comment text content"
            }
          },
          "required": [
            "issue_id",
            "author",
            "content"
          ]
        }
      }
    ],
    "keybindings": [
      {
        "command": "cairn.openTaskList",
        "key": "ctrl+shift+t",
        "mac": "cmd+shift+t",
        "when": "workspaceFolderCount != 0"
      },
      {
        "command": "cairn.createTicket",
        "key": "ctrl+shift+n",
        "mac": "cmd+shift+n",
        "when": "workspaceFolderCount != 0"
      }
    ]
  },
  "vsce": {
    "dependencies": false
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.90.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@vscode/vsce": "^2.24.0",
    "esbuild": "^0.27.2",
    "eslint": "^8.0.0",
    "typedoc": "^0.28.16",
    "typescript": "^5.0.0",
    "vitest": "^1.6.1"
  }
}
