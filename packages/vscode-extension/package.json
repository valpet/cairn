{
  "name": "cairn-extension",
  "displayName": "Cairn: Context Keeper",
  "version": "1.3.0",
  "publisher": "valpet",
  "description": "Prevents AI agent 'dementia' in long development sessions. Maintains persistent, structured context through a dependency-aware graph that survives across conversations.",
  "readme": "README.md",
  "changelog": "CHANGELOG.md",
  "author": {
    "name": "Peter Valtersson",
    "email": "peter.valtersson@gmail.com"
  },
  "license": "MIT",
  "repository": "https://github.com/valpet/cairn",
  "homepage": "https://github.com/valpet/cairn",
  "bugs": {
    "url": "https://github.com/valpet/cairn/issues"
  },
  "sponsor": {
    "url": "https://buymeacoffee.com/valpet"
  },
  "keywords": [
    "task",
    "management",
    "ai",
    "collaboration",
    "productivity",
    "workflow",
    "project",
    "organization"
  ],
  "categories": [
    "AI",
    "Other"
  ],
  "galleryBanner": {
    "color": "#1e1e1e",
    "theme": "dark"
  },
  "preview": true,
  "icon": "assets/cairn-icon.png",
  "main": "dist/src/extension.js",
  "scripts": {
    "build": "node scripts/build.js",
    "dev-setup": "cd ../core && npm link && cd ../vscode-extension && npm link @valpet/cairn-core",
    "prepackage": "node -e \"const fs = require('fs'); const path = require('path'); const srcDir = path.join(__dirname, '../core/dist'); const destDir = path.join(__dirname, 'node_modules/@cairn/core'); if (!fs.existsSync(path.dirname(destDir))) fs.mkdirSync(path.dirname(destDir), { recursive: true }); fs.cpSync(srcDir, destDir, { recursive: true }); fs.copyFileSync(path.join(__dirname, '../core/package.json'), path.join(destDir, 'package.json')); console.log('Copied core package to node_modules');\"",
    "package": "npx vsce package",
    "package-all": "npm run prepackage && npm run build && npm run package",
    "test": "vitest --run --passWithNoTests",
    "test:coverage": "vitest --run --passWithNoTests --coverage"
  },
  "dependencies": {
    "@valpet/cairn-core": "^1.3.0",
    "nanoid": "^5.0.0"
  },
  "engines": {
    "vscode": "^1.90.0"
  },
  "enabledApiProposals": [
    "languageModelTools"
  ],
  "activationEvents": [
    "onCommand:cairn.openTaskList",
    "onCommand:cairn.editTask",
    "onCommand:cairn.createTask",
    "onCommand:cairn.switchFile",
    "onLanguageModelTool:cairn_create",
    "onLanguageModelTool:cairn_list_ready",
    "onLanguageModelTool:cairn_update",
    "onLanguageModelTool:cairn_dep_add",
    "onLanguageModelTool:cairn_comment",
    "onLanguageModelTool:cairn_ac_add",
    "onLanguageModelTool:cairn_ac_update",
    "onLanguageModelTool:cairn_ac_remove",
    "onLanguageModelTool:cairn_ac_toggle"
  ],
  "contributes": {
    "commands": [
      {
        "command": "cairn.openTaskList",
        "title": "Cairn: Open Task List"
      },
      {
        "command": "cairn.editTask",
        "title": "Cairn: Edit Task"
      },
      {
        "command": "cairn.createTask",
        "title": "Cairn: Create New Task"
      },
      {
        "command": "cairn.switchFile",
        "title": "Cairn: Switch Task File"
      }
    ],
    "languageModelTools": [
      {
        "name": "cairn_create",
        "displayName": "Create Task",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_create",
        "userDescription": "Create a new task in Cairn task management system",
        "modelDescription": "Create a new task in Cairn with full configuration options. Use this when the user wants to create a new task, issue, or work item with specific properties like title, description, type (task/bug/feature/epic/chore/docs/refactor), priority (low/medium/high/urgent), status, or parent relationships.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string",
              "description": "The title of the task"
            },
            "description": {
              "type": "string",
              "description": "Optional description of the task"
            },
            "type": {
              "type": "string",
              "enum": [
                "task",
                "bug",
                "feature",
                "epic",
                "chore",
                "docs",
                "refactor"
              ],
              "description": "Type of the task"
            },
            "priority": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "Priority level"
            },
            "status": {
              "type": "string",
              "enum": [
                "open",
                "in_progress",
                "closed",
                "blocked"
              ],
              "description": "Initial status of the task"
            },
            "parent": {
              "type": "string",
              "description": "Optional parent task ID for parent-child relationship"
            }
          },
          "required": [
            "title"
          ]
        }
      },
      {
        "name": "cairn_list_ready",
        "displayName": "List Ready Tasks",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_list_ready",
        "userDescription": "List all unblocked tasks that are ready to work on",
        "modelDescription": "List all ready (unblocked) tasks in Cairn. Use this to find work that can be started immediately, without any blocking dependencies. Returns tasks with their ID, title, status, and priority.",
        "inputSchema": {
          "type": "object",
          "properties": {}
        }
      },
      {
        "name": "cairn_update",
        "displayName": "Update Task",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_update",
        "userDescription": "Update an existing task's properties like status, description, priority, type, assignee, labels, or acceptance criteria",
        "modelDescription": "Update an existing task in Cairn. Use this to change task properties including status, description, priority, type, assignee, labels, design notes, or acceptance criteria. Always provide the task ID.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "The ID of the task to update"
            },
            "status": {
              "type": "string",
              "enum": [
                "open",
                "in_progress",
                "closed",
                "blocked"
              ],
              "description": "New status for the task"
            },
            "title": {
              "type": "string",
              "description": "Updated title for the task"
            },
            "description": {
              "type": "string",
              "description": "Updated description for the task"
            },
            "type": {
              "type": "string",
              "enum": [
                "task",
                "bug",
                "feature",
                "epic",
                "chore",
                "docs",
                "refactor"
              ],
              "description": "Updated type for the task"
            },
            "priority": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "urgent"
              ],
              "description": "Updated priority level"
            },
            "assignee": {
              "type": "string",
              "description": "Updated assignee for the task"
            },
            "labels": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Updated labels array for the task"
            },
            "design": {
              "type": "string",
              "description": "Updated design notes for the task"
            },
            "acceptance_criteria": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Acceptance criteria as array of strings"
            }
          },
          "required": [
            "id"
          ]
        }
      },
      {
        "name": "cairn_dep_add",
        "displayName": "Add Dependency",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_dep_add",
        "userDescription": "Add a dependency relationship between two tasks",
        "modelDescription": "Add a dependency between tasks in Cairn. Use this to create relationships: 'blocks' (task A blocks task B), 'related' (general relationship), 'parent-child' (epic/subtask), or 'discovered-from' (task discovered while working on another).",
        "inputSchema": {
          "type": "object",
          "properties": {
            "from": {
              "type": "string",
              "description": "The ID of the dependent task"
            },
            "to": {
              "type": "string",
              "description": "The ID of the task it depends on"
            },
            "type": {
              "type": "string",
              "enum": [
                "blocks",
                "related",
                "parent-child",
                "discovered-from"
              ],
              "description": "Type of dependency"
            }
          },
          "required": [
            "from",
            "to",
            "type"
          ]
        }
      },
      {
        "name": "cairn_comment",
        "displayName": "Add Comment",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_comment",
        "userDescription": "Add a comment to a task for collaboration",
        "modelDescription": "Add a comment to a Cairn task for collaboration and documentation. Use this to record findings, ideas, challenges, solutions, progress updates, or communicate with the developer. Comments preserve project history and context.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "The ID of the task to add a comment to"
            },
            "author": {
              "type": "string",
              "description": "Author of the comment (e.g., 'agent' or developer name)"
            },
            "content": {
              "type": "string",
              "description": "The comment text content"
            }
          },
          "required": [
            "task_id",
            "author",
            "content"
          ]
        }
      },
      {
        "name": "cairn_ac_add",
        "displayName": "Add Acceptance Criteria",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_ac_add",
        "userDescription": "Add acceptance criteria to a task",
        "modelDescription": "Add acceptance criteria to a Cairn task. Use this to define specific, testable outcomes that must be met for the task to be considered complete.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "The ID of the task to add acceptance criteria to"
            },
            "text": {
              "type": "string",
              "description": "The acceptance criteria text"
            }
          },
          "required": [
            "task_id",
            "text"
          ]
        }
      },
      {
        "name": "cairn_ac_update",
        "displayName": "Update Acceptance Criteria",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_ac_update",
        "userDescription": "Update the text of acceptance criteria for a task",
        "modelDescription": "Update the text of specific acceptance criteria for a Cairn task. Use this when requirements change or when clarifying acceptance criteria.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "The ID of the task containing the acceptance criteria"
            },
            "index": {
              "type": "number",
              "description": "The index of the acceptance criteria to update (0-based)"
            },
            "text": {
              "type": "string",
              "description": "The new acceptance criteria text"
            }
          },
          "required": [
            "task_id",
            "index",
            "text"
          ]
        }
      },
      {
        "name": "cairn_ac_remove",
        "displayName": "Remove Acceptance Criteria",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_ac_remove",
        "userDescription": "Remove acceptance criteria from a task",
        "modelDescription": "Remove specific acceptance criteria from a Cairn task. Use this when acceptance criteria are no longer relevant or were added in error.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "The ID of the task containing the acceptance criteria"
            },
            "index": {
              "type": "number",
              "description": "The index of the acceptance criteria to remove (0-based)"
            }
          },
          "required": [
            "issue_id",
            "index"
          ]
        }
      },
      {
        "name": "cairn_ac_toggle",
        "displayName": "Toggle Acceptance Criteria Completion",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "cairn_ac_toggle",
        "userDescription": "Toggle the completion status of acceptance criteria",
        "modelDescription": "Toggle the completion status of specific acceptance criteria for a Cairn task. Use this to mark criteria as complete or incomplete as work progresses.",
        "inputSchema": {
          "type": "object",
          "properties": {
            "task_id": {
              "type": "string",
              "description": "The ID of the task containing the acceptance criteria"
            },
            "index": {
              "type": "number",
              "description": "The index of the acceptance criteria to toggle (0-based)"
            }
          },
          "required": [
            "task_id",
            "index"
          ]
        }
      }
    ],
    "keybindings": [
      {
        "command": "cairn.openTaskList",
        "key": "ctrl+shift+t",
        "mac": "cmd+shift+t",
        "when": "workspaceFolderCount != 0"
      },
      {
        "command": "cairn.createTask",
        "key": "ctrl+shift+n",
        "mac": "cmd+shift+n",
        "when": "workspaceFolderCount != 0"
      }
    ]
  },
  "vsce": {
    "dependencies": false
  },
  "devDependencies": {
    "@testing-library/react": "^16.3.2",
    "@types/node": "^20.0.0",
    "@types/vscode": "^1.90.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@vscode/vsce": "^2.24.0",
    "esbuild": "^0.27.2",
    "eslint": "^8.0.0",
    "happy-dom": "^20.3.9",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "typedoc": "^0.28.16",
    "typescript": "^5.0.0",
    "vitest": "^4.0.18"
  }
}
